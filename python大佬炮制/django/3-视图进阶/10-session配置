
######################
#session演示#

def sessionTest1(request):  #登录
    return render(request, 'viewtest/sessionTest1.html')

def sessionTest2(request):  #接收
    request.session['uname'] = request.POST['uname']
    request.session.set_expiry(0)  #关闭浏览器就是过期
    #request.session.set_expiry(120)  #120秒没有活动则过期
    #request.session.set_expiry(timedelta(days=12))  #120秒没有活动则过期
    #request.session.set_expiry(None)   #永不过期
    request.session.set_expiry(0)  #关闭浏览器就是过期
    #return redirect('/sessionForm/')
    return redirect(reverse('viewurl:sessionForm'))  #反向解析  viewurl是 项目urls include中的namespace  sessionForm是应用app中的name

def sessionForm(request):   #展示页面
    uname=request.session.get('uname','未登录')
    context = {'uname':uname}
    return render(request,'viewtest/sessionForm.html',context)

def sessionDelete(request):           #删除session
    del request.session['uname']
    # request.session.clear()   #清空
    #request.flush()     #删除
    #return redirect('/sessionForm/')
    return redirect(reverse('viewurl:sessionForm'))    #反向解析
